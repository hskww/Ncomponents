define(["underscore"],function(e){"use strict";var t={version:"0.0.1",time_stamp:+new Date,noop:function(){},system:{},number:{},date:{},string:{},cookie:{}};return t.system.is_mobile=function(){var e=window.navigator.userAgent,t=e.length,r=e.replace(/iphone|ipad mini|ipad|ipod|android|Series60|BlackBerry|Windows Phone/gi,"").length;return r!==t}(),t.number.format=function(e,r,n){var a;r="number"!=typeof(1*r)||isNaN(1*r)?2:Math.abs(r),a=Math.pow(10,r),e*=1;var o=9.9999e-11;switch(n){case 1:e=Math.ceil(e*a)/a;break;case-1:e=Math.floor(e*a+o)/a;break;case 465:var i=Math.floor(e*a+o)%10%2,u=Math.floor(e*a*10+o)%10==5,c=u&&!i?1/a:0;e=t.number.format(e,r)-c;break;default:e=(e*a+o)/a}return(e.toFixed(r)+"").replace(/^\./g,"0.").replace(/\.$/,"")},t.number.currency=function(e,r,n){var a;return"undefined"!=typeof r&&(e=t.number.format(e,r,n)),a=(e+"").split("."),a[0]=a[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,"),(a[0]+(2==a.length?"."+a[1]:"")).replace(/^\./g,"0.")},t.number.percent=function(e,r,n,a){return t.number.format(1*e*(r||100),n,a)},t.number.combo=function(e,t){var r,n;if(t>e/2&&(t=e-t),t>e||0>t)return 0;if(e>=0&&0===t)return 1;r=1,n=e;for(var a=1;t>=a;a++)r*=a,t>a&&(n*=e-a);return n/r},t.number.each_combo=function(e,t){var r=[];return function n(e,t,a){if(0===a)return r.push(e);for(var o=0,i=t.length;i-a>=o;o++)n(e.concat(t[o]),t.slice(o+1),a-1)}([],e,t),r},t.number.each_array_combo=function(e){var t,r=0,n=e.length,a=[],o=[];return o.push(e),function i(e){for(var o=[],u=0,c=e.length;c>u;u++)for(var s=0,f=e[u][r].length;f>s;s++)t=[].concat(e[u]),t.splice(r,1,e[u][r][s]),o.push(t);return r++,n>r?void i(o):void(a=o)}(o),a},t.number.permutation=function(e,t){var r=1;if(t>e||0>t)return 0;for(var n=0;t>n;n++)r*=e-n;return r},t.number.each_permutation=function(e,t){var r=[];return function n(e,t,a){if(0===a)return r.push(e);for(var o=0,i=t.length;i>o;o++)n(e.concat(t[o]),t.slice(0,o).concat(t.slice(o+1)),a-1)}([],e,t),r},t.number.random=function(e){var r={min:0,max:9,share:[],shahao:[],size:1};$.extend(r,e),r.count=r.count||1;var n=function(e){var t,r,n,a,o=0,i="0000000000000000";if(n=(e.max+"").length,t=(e.share||[]).toString(),t=""===t?[]:t.split(/[,\-_=+\|]/),a=t.length,a>0&&e.max>9)for(var u=0;a>u;u++)t[u].length<n&&(t[u]=i.substr(0,n-t[u].length)+t[u]);for(;o<e.size;)r=Math.floor(Math.random()*(e.max-e.min+1))+e.min+"",r=i.substr(0,n-r.length)+r,(e.repeat||!e.repeat&&-1==$.inArray(r,t)&&-1==$.inArray(r,e.shahao||[]))&&(t.push(r),o++);return e.sort&&t.sort(),"undefined"!=typeof e.split_str?t.join(e.split_str):t},a=[],o=t.number.combo(r.max-r.min+1-r.share.length-r.shahao.length,r.size);o<r.count&&(r.repeat_team=1);for(var i=0;i<r.count;i++){var u=n(r);if(r.repeat_team)a.push(u);else{for(var c=a.length,s=0,f=0;c>f;f++)if(a[f].toString()==u.toString()){s=1;break}s?i--:a.push(u)}}return a},t.number.pass_key=function(e){return $.inArray(e.keyCode,[8,16,17,37,38,39,40,46,67])>=0},t.number.is_seq=function(t,r){var n=[].concat(t);r=r||1,n=e.unique(n);var a=t.length,o=n.length,i=!1;return a==o&&(n.sort(function(e,t){return e-t}),i=(n[a-1]-n[0])/r+1==a),i},t.date.format=function(e,r){e="object"==typeof e?e:new Date(1*e),r=r||"YYYY-MM-DD hh:mm:ss";var n=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),i=e.getHours(),u=e.getMinutes(),c=e.getSeconds(),s=(n+"").replace(/^\d\d/g,"");return a=10>a?"0"+a:a,o=10>o?"0"+o:o,i=10>i?"0"+i:i,u=10>u?"0"+u:u,c=10>c?"0"+c:c,t.string.mul_replace(r,[[/YYYY/,n],[/YY/,s],[/MM/,a],[/DD/,o],[/hh/,i],[/mm/,u],[/ss/,c]])},t.date.to_date=function(e){e=$.trim(e);var t=e,r=/.*(\d{4})(\d\d)(\d\d).*/;return $.isNumeric(e)&&r.test(e)&&(t=e.replace(r,"$1-$2-$3")),new Date(t)},t.date.get_week=function(e,r){var n=t.date.to_date(e);r=r||0;var a=n.getDay(),o="周"+["日","一","二","三","四","五","六"][a],i=0==r?o:1==r?a:[o,a];return i},t.string.len=function(e){return e.replace(/[^\x00-\xff]/g,"--").length},t.string.cut=function(e,r,n){return n=n||"",t.string.len(e)<=r-n.length?e:(r-=n.length,e.substr(0,r).replace(/([^\x00-\xff])/g,"$1 ").substr(0,r).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1")+n)},t.string.get_url_param=function(e,t){var r,n;return t=(t||window.location.href).toLowerCase().split("#"),n=-1!=e.indexOf("#")?t.length<2?"":t[1]:t[0],r=n.match(new RegExp("(|[?&#])"+e.replace("#","")+"=([^#&?]*)(\\s||$)","gi")),r?decodeURIComponent(r[0].split("=")[1]):""},t.string.mul_replace=function(e,t){for(var r=0,n=t.length;n>r;r++)e=e.replace(t[r][0],t[r][1]);return e},t.string.dbc_to_sbc=function(e){return t.string.mul_replace(e,[[/[\uff01-\uff5e]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}],[/\u3000/g," "],[/\u3002/g,"."]])},t.cookie.get=function(e,t){var r=document.cookie.match(new RegExp("(^| )"+e+"=([^;])*","gi")),n=r?r[0].split(e+"=")[1]:"";return t?n:decodeURIComponent(n)},t.cookie.set=t.cookie.del=function(e){var t=[];if(t.push(e.name+"="),e.value&&t.push(e.encode?e.value:encodeURIComponent(e.value)),e.expires){var r=new Date;r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setTime(r.getTime()+864e5*e.expires),t.push(";expires="+r.toGMTString())}e.domain&&t.push(";domain="+e.domain),t.push(";path="+(e.path||"/")),e.secure&&t.push(";secure"),document.cookie=t.join("")},t}),function(e,t){"use strict";var r=t.querySelector('meta[name="viewport"]'),n=e.devicePixelRatio||1,a=1/n;r.setAttribute("content","width=device-width,initial-scale="+a+",maximum-scale="+a+", minimum-scale="+a+",user-scalable=no");var o=function(){var r=e.innerWidth;return r?void(t.documentElement.style.fontSize=20*r/320+"px"):!1};o(),e.addEventListener("resize",o,!1),e.addEventListener("load",o,!1)}(window,document);